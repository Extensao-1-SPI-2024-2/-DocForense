{% extends "base.html" %}

{% block title %}Listagem de Modelos{% endblock %}
{% block maintitle %}Listagem de Modelos{% endblock %}

{% block breadcrumb %}
  <li class="breadcrumb-item"><a href="#">Modelos de Laudo</a></li>
  <li class="breadcrumb-item active" aria-current="page">Listagem</li>
{% endblock %}

{% block content %}
{% if messages %}
{% for message in messages %}
  <div class="alert mt-5 {% if message.tags %} alert-{{ message.tags }}{% else %} alert-info {% endif %}"
    role="alert">{{ message }}</div>
{% endfor %}
{% endif %}
  <div class="card py-3 px-2 bg-white">
    <div class="p-2">
      <h5>Listagem</h5>
    </div>
    <div class="card-body">
      <div class="text-end">
        <a href="/modelo/laudo/criar"><button class="btn btn-primary"><i class="fas fa-plus"></i> Cadastrar</button></a>
      </div>

      <table id="listagem" class="table table-striped table-bordered" style="width:100%">
        <thead>
          <tr>
            <th>Descricao</th>
            <th>Usuário</th>
            <th>Inclusão</th>
            <th>Ações</th>
          </tr>
        </thead>
        <tbody>
          {% for modelo in modelos %}
            <tr>
              <td>{{ modelo.name }}</td>
              <td>{{ modelo.user_inclusion.first_name }} {{ modelo.user_inclusion.last_name }}</td>
              <td>{{ modelo.date_inclusion|date:'d/m/Y H:i' }}</td>
              <td class="is-narrow">
                <div class="text-end">
                    <a href="/modelo/laudo/visualizar/{{ modelo.id }}"><button class="btn btn-success btn-sm"><i class="fas fa-eye"></i></button></a>
                    <a href="/modelo/laudo/editar/{{ modelo.id }}"><button class="btn btn-primary btn-sm"><i class="fas fa-edit"></i></button></a>
                    <a href="/modelo/laudo/deletar/{{ modelo.id }}"><button class="btn btn-danger btn-sm"><i class="fas fa-trash"></i></button></a>
                </div>
              </td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>

  <script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
  <script src="https://cdn.datatables.net/1.13.5/js/jquery.dataTables.min.js"></script>
  <script src="https://cdn.datatables.net/1.13.5/js/dataTables.bootstrap5.min.js"></script>
  <script>
    $(document).ready(function () {
      $('#listagem').DataTable({
        // Opções de personalização
        paging: true, // Habilita paginação
        searching: false, // Habilita barra de pesquisa
        info: true, // Exibe informações como "Mostrando X de Y"
        lengthChange: true, // Permite alterar o número de linhas exibidas
        pageLength: 10, // Define o número padrão de linhas por página
        language: {
          url: "https://cdn.datatables.net/plug-ins/1.13.5/i18n/pt-BR.json"
        }
      })
    })
  </script>
{% endblock %}
